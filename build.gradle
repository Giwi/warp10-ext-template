plugins {
  id 'java'
  id 'com.github.johnrengelman.shadow' version '2.0.4'
  id 'eclipse'
  id 'idea'
}

wrapper {
  distributionType = Wrapper.DistributionType.ALL
}

// In this section you declare where to find the dependencies of your project
repositories {

  maven {
    url 'https://dl.bintray.com/cityzendata/maven'
  }

  maven {
    url 'https://dl.bintray.com/hbs/maven'
  }

  maven {
    url 'http://nexus.bedatadriven.com/content/groups/public/'
  }

  mavenCentral()
  mavenLocal()
}

configurations {
  provided
}

// In this section you declare the dependencies for your production and test code
dependencies {
  provided 'io.warp10:warpscript:+'

  testCompile'io.warp10:warpscript:+'
  testImplementation 'junit:junit:4.12'
}

test {
  useJUnit()
}

sourceSets {
  main {
    compileClasspath = compileClasspath + configurations.provided
  }
}

eclipse.classpath.plusConfigurations += [configurations.provided]  // Eclipse users only

// for IntelliJ users
idea {
  module {
    scopes.PROVIDED.plus += [configurations.provided]
  }
}


version ='0.0.1'
shadowJar {
  classifier = ''
  manifest {
    attributes('Implementation-Title': project.name)
    attributes('Implementation-Version': project.version)
  }
}

shadowJar.dependsOn(test)
